(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[308],{5380:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=5380,e.exports=t},8956:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return w}});var n=o(7294),r=o(9253),a=o(6561),s=o(2574),l=o(2728),p=o(3972),i=o(3838),c=o(7645),d=o(7750),m=o(6408),u=o(8979),h=o(5116),Z=o(2186),y=o(8168),g=o(4757),f=o(9457),b=o(7370),k=o(2093),v=o(2964),x=o(917);var A=e=>{let{location:t,placeholder:o,defaultFiles:r,renderEditor:a,renderPreview:A,inputSystemPrompt:P=""}=e;const{0:w,1:C}=(0,n.useState)({prompt:"",enhancedPrompt:"",files:r,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"info",systemPrompt:P,showCodeEditor:!0,showAppOutput:!0,showAI:!0,loginModalOpen:!1,user:null,isAppDeployed:!1,deployModalOpen:!1,isDeploying:!1,deployStatusMessage:"",isPromoting:!1,promoteModalOpen:!1,src:o,dest:"",token:""}),{prompt:O,enhancedPrompt:M,files:D,snackbarOpen:E,snackbarMessage:S,snackbarSeverity:_,systemPrompt:R,showCodeEditor:I,showAppOutput:j,showAI:L,loginModalOpen:T,user:U,isAppDeployed:B,deployModalOpen:F,isDeploying:W,deployStatusMessage:H,isPromoting:N,promoteModalOpen:q,src:z,dest:J,token:X}=w,Y=new URLSearchParams(t.search),$=Y.has("p")&&B,G=Y.get("prompt");(0,n.useEffect)((()=>{(async()=>{try{const e=await k.Z.Cloud.run("getApp",{id:o});null!=e&&e.files&&Object.keys(e.files).length>0?C((t=>({...t,files:e.files,isAppDeployed:!0}))):C((e=>({...e,isAppDeployed:!1})))}catch(e){console.error("Error fetching app data:",e),C((e=>({...e,isAppDeployed:!1})))}})()}),[o]),(0,n.useEffect)((()=>{const e=Object.values(D).map((e=>e.code)).join("\n\n")+"\n\n"+O+"\n\n"+R;C((t=>({...t,enhancedPrompt:e})))}),[D,O,R]),(0,n.useEffect)((()=>{const e=k.Z.User.current();e&&C((t=>({...t,user:e})))}),[]),(0,n.useEffect)((()=>{G&&C((e=>({...e,systemPrompt:G})))}),[G]);const K=()=>{C((e=>({...e,promoteModalOpen:!1})))},Q=e=>{const{name:t,value:o}=e.target;C((e=>({...e,[t]:o})))};return(0,x.tZ)(v.Z,{deployButton:(0,x.tZ)(s.Z,{variant:"contained",onClick:()=>{C((e=>({...e,deployModalOpen:!0})))}},"Deploy"),promoteButton:$&&(0,x.tZ)(s.Z,{variant:"contained",color:"secondary",onClick:()=>{C((e=>({...e,promoteModalOpen:!0})))},disabled:N},"Promote")},(0,x.tZ)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"80vh",textAlign:"center"}},I&&(0,x.tZ)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},width:"100%",gap:2,mb:4}},a(D,((e,t)=>{C((o=>({...o,files:{...o.files,[e]:{code:t}}})))})),A(D)),(0,x.tZ)(l.Z,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},width:"100%",gap:2,mt:2}},(0,x.tZ)(l.Z,{sx:{flex:2}},(0,x.tZ)(f.q,{prompt:O,setPrompt:e=>C((t=>({...t,prompt:e}))),enhancedPrompt:M,handleCopyPrompt:()=>{navigator.clipboard.writeText(M).then((()=>{C((e=>({...e,snackbarMessage:"Prompt copied to clipboard!",snackbarSeverity:"success",snackbarOpen:!0})))}))},systemPrompt:R,setSystemPrompt:e=>C((t=>({...t,systemPrompt:e})))})),L&&(0,x.tZ)(l.Z,{sx:{flex:1}},(0,x.tZ)(p.Z,{variant:"h5",component:"h2",gutterBottom:!0},"Step 3: Paste to AI"),(0,x.tZ)(g.$,{showAI:L,setShowAI:e=>C((t=>({...t,showAI:e})))}))),H&&(0,x.tZ)(p.Z,{variant:"body1",color:"textSecondary"},H),(0,x.tZ)(l.Z,{sx:{display:"flex",gap:2,mb:2}},!I&&(0,x.tZ)(s.Z,{variant:"outlined",onClick:()=>C((e=>({...e,showCodeEditor:!0}))),startIcon:(0,x.tZ)(Z.Z,null)},"Show Code Editor"),!j&&(0,x.tZ)(s.Z,{variant:"outlined",onClick:()=>C((e=>({...e,showAppOutput:!0}))),startIcon:(0,x.tZ)(Z.Z,null)},"Show App Output"))),(0,x.tZ)(b.Z,{open:T,onClose:()=>C((e=>({...e,loginModalOpen:!1}))),onLoginSuccess:()=>{const e=k.Z.User.current();C((t=>({...t,user:e})))}}),(0,x.tZ)(i.Z,{open:F,onClose:()=>C((e=>({...e,deployModalOpen:!1})))},(0,x.tZ)(c.Z,null,"Bookmark This App"),(0,x.tZ)(d.Z,null,(0,x.tZ)(m.Z,null,"Before deploying, we recommend bookmarking this app to avoid losing it. Press ",(0,x.tZ)("strong",null,"Ctrl+D")," (Windows/Linux) or ",(0,x.tZ)("strong",null,"Cmd+D")," (Mac) to bookmark this page. Once Deployed, there will be a link beside the app name.")),(0,x.tZ)(u.Z,null,(0,x.tZ)(s.Z,{onClick:()=>C((e=>({...e,deployModalOpen:!1})))},"Cancel"),(0,x.tZ)(s.Z,{onClick:()=>{C((e=>({...e,deployModalOpen:!1,isDeploying:!0}))),(async()=>{try{const e=await k.Z.Cloud.run("deployApp",{files:D,placeholder:o});C((e=>({...e,snackbarMessage:"App deployed successfully!",snackbarSeverity:"success",snackbarOpen:!0,isAppDeployed:!0,deployStatusMessage:"A link will appear beside the app name"}))),setTimeout((()=>{C((e=>({...e,deployStatusMessage:""})))}),3e3),console.log("Deployment result:",e)}catch(e){C((e=>({...e,snackbarMessage:"Failed to deploy app. Please try again.",snackbarSeverity:"error",snackbarOpen:!0}))),console.error("Deployment error:",e)}})()},color:"primary",variant:"contained"},"Deploy"))),(0,x.tZ)(i.Z,{open:q,onClose:K},(0,x.tZ)(c.Z,null,"Promote App"),(0,x.tZ)(d.Z,null,(0,x.tZ)(h.Z,{fullWidth:!0,label:"Source App ID",name:"src",value:z+"/index.html",onChange:Q,margin:"normal",disabled:!0}),(0,x.tZ)(h.Z,{fullWidth:!0,label:"Destination App ID",name:"dest",value:""+J,onChange:Q,margin:"normal"}),(0,x.tZ)(h.Z,{fullWidth:!0,label:"Token",name:"token",value:X,onChange:Q,margin:"normal"})),(0,x.tZ)(u.Z,null,(0,x.tZ)(s.Z,{onClick:K},"Cancel"),(0,x.tZ)(s.Z,{onClick:async()=>{C((e=>({...e,isPromoting:!0})));try{const e=await k.Z.Cloud.run("copyApp",{src:z,dest:J,token:X});C((e=>({...e,snackbarMessage:"App promoted successfully!",snackbarSeverity:"success",snackbarOpen:!0,isPromoting:!1,promoteModalOpen:!1}))),console.log("Promotion result:",e)}catch(e){C((e=>({...e,snackbarMessage:"Failed to promote app. Please try again.",snackbarSeverity:"error",snackbarOpen:!0,isPromoting:!1}))),console.error("Promotion error:",e)}},color:"primary",variant:"contained",disabled:N},N?"Promoting...":"Promote"))),(0,x.tZ)(y.r,{open:E,message:S,severity:_,onClose:()=>C((e=>({...e,snackbarOpen:!1})))}))},P=o(2175);var w=e=>{let{location:t,placeholder:o}=e;const{0:s,1:p}=(0,n.useState)({"/App.js":{code:"import React from 'react';\n\nconst App = () => {\n  return (\n    <div>\n      <h1>Welcome to React App!</h1>\n      <p>Edit this code to build your React application.</p>\n    </div>\n  );\n};\n\nexport default App;"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>React App</title>\n</head>\n<body>\n  <div id="root"></div>\n</body>\n</html>'}}),i=(0,n.useRef)(null);(0,n.useEffect)((()=>{if(i.current){const e=i.current;e.addEventListener("load",(()=>{const t=e.contentDocument;t.body.innerHTML=s["/index.html"].code,console.log("Iframe content set:",t.body.innerHTML);try{const e=(0,P.transform)(s["/App.js"].code,{presets:["react"]}).code;console.log("Compiled code:",e);const o=t.createElement("script");o.type="module",o.textContent='\n            import React from \'https://unpkg.com/react@18/umd/react.production.min.js\';\n            import ReactDOM from \'https://unpkg.com/react-dom@18/umd/react-dom.production.min.js\';\n            const App = () => { return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Welcome to React App!"), /*#__PURE__*/React.createElement("p", null, "Edit this code to build your React application.")); };\n  \n            ReactDOM.render(<App />, document.getElementById(\'root\'));\n          ',o.onerror=e=>{console.error("Error loading script:",e)},console.log("Script content:",o.textContent),t.body.appendChild(o)}catch(o){console.error("Error compiling JSX:",o)}}))}}),[s]);const c=(e,t)=>{p((o=>({...o,[e]:{code:t}})))};return(0,x.tZ)(n.Fragment,null,(0,x.tZ)(A,{location:t,placeholder:o,defaultFiles:s,renderEditor:e=>((e,t)=>(0,x.tZ)(l.Z,{sx:{flex:1,height:{xs:"300px",md:"600px"},border:"1px solid #ccc"}},(0,x.tZ)(r.ZP,{height:"100%",width:"100%",theme:"vs-light",defaultLanguage:"javascript",value:e["/App.js"].code,onChange:e=>t("/App.js",e),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1}})))(e,c),renderPreview:()=>(0,x.tZ)(l.Z,{sx:{flex:1,height:{xs:"300px",md:"600px"},border:"1px solid #ccc"}},(0,x.tZ)(a.ZP,{ref:i,style:{width:"100%",height:"100%",border:"none"}},(0,x.tZ)("div",{dangerouslySetInnerHTML:{__html:s["/index.html"].code}}))),inputSystemPrompt:"create a react component with good design in one file"}),(0,P.transform)(s["/App.js"].code,{presets:["react"]}).code)}}}]);
//# sourceMappingURL=component---src-pages-dev-[placeholder]-js-6edb6a81cd075846194c.js.map