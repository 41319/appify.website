{"version":3,"file":"component---src-pages-dev-[placeholder]-js-6edb6a81cd075846194c.js","mappings":"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","sources":["webpack://gatsby-starter-default/./node_modules/@babel/standalone/ sync","webpack://gatsby-starter-default/./src/components/Builder.js","webpack://gatsby-starter-default/./src/pages/dev/[placeholder].js"],"sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 5380;\nmodule.exports = webpackEmptyContext;","// BaseAppPage.js\nimport React, { useState, useEffect } from 'react';\nimport { Box, Typography, Button, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField } from '@mui/material';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport { SnackbarAlert } from './placeholder/SnackbarAlert';\nimport { AIChat } from './placeholder/AIChat';\nimport { PromptSection } from './placeholder/PromptSection';\nimport LoginModal from './LoginModal';\nimport Parse from '../vendor/Parse';\nimport Layout from './Layout';\n\n\n\nconst BaseAppPage = ({ location, placeholder, defaultFiles, renderEditor, renderPreview, inputSystemPrompt = ''}) => {\n  const [state, setState] = useState({\n    prompt: '',\n    enhancedPrompt: '',\n    files: defaultFiles,\n    snackbarOpen: false,\n    snackbarMessage: '',\n    snackbarSeverity: 'info',\n    systemPrompt: inputSystemPrompt,\n    showCodeEditor: true,\n    showAppOutput: true,\n    showAI: true,\n    loginModalOpen: false,\n    user: null,\n    isAppDeployed: false,\n    deployModalOpen: false,\n    isDeploying: false,\n    deployStatusMessage: '',\n    isPromoting: false,\n    promoteModalOpen: false,\n    src: placeholder,\n    dest: '',\n    token: '',\n  });\n\n  const {\n    prompt,\n    enhancedPrompt,\n    files,\n    snackbarOpen,\n    snackbarMessage,\n    snackbarSeverity,\n    systemPrompt,\n    showCodeEditor,\n    showAppOutput,\n    showAI,\n    loginModalOpen,\n    user,\n    isAppDeployed,\n    deployModalOpen,\n    isDeploying,\n    deployStatusMessage,\n    isPromoting,\n    promoteModalOpen,\n    src,\n    dest,\n    token,\n  } = state;\n\n  const queryParams = new URLSearchParams(location.search);\n  const showPromoteButton = queryParams.has('p') && isAppDeployed;\n  const urlPrompt = queryParams.get('prompt');\n\n  useEffect(() => {\n    const fetchAppData = async () => {\n      try {\n        const result = await Parse.Cloud.run('getApp', { id: placeholder });\n        if (result?.files && Object.keys(result.files).length > 0) {\n          setState((prev) => ({ ...prev, files: result.files, isAppDeployed: true }));\n        } else {\n          setState((prev) => ({ ...prev, isAppDeployed: false }));\n        }\n      } catch (error) {\n        console.error('Error fetching app data:', error);\n        setState((prev) => ({ ...prev, isAppDeployed: false }));\n      }\n    };\n\n    fetchAppData();\n  }, [placeholder]);\n\n  useEffect(() => {\n    const combinedCode = Object.values(files)\n      .map((file) => file.code)\n      .join('\\n\\n');\n    \n    const enhancedPrompt = `${combinedCode}\\n\\n${prompt}\\n\\n${systemPrompt}`;\n    \n    setState((prev) => ({ ...prev, enhancedPrompt }));\n  }, [files, prompt, systemPrompt]);\n\n  useEffect(() => {\n    const currentUser = Parse.User.current();\n    if (currentUser) setState((prev) => ({ ...prev, user: currentUser }));\n  }, []);\n\n  useEffect(() => {\n    if (urlPrompt) {\n      setState((prev) => ({ ...prev, systemPrompt: urlPrompt }));\n    }\n  }, [urlPrompt]);\n\n  const handleCopyPrompt = () => {\n    navigator.clipboard.writeText(enhancedPrompt).then(() => {\n      setState((prev) => ({ ...prev, snackbarMessage: 'Prompt copied to clipboard!', snackbarSeverity: 'success', snackbarOpen: true }));\n    });\n  };\n\n  const handlePromptChange = (e) => {\n    setState((prev) => ({ ...prev, prompt: e.target.value }));\n  };\n\n  const handleDeploy = async () => {\n    try {\n      const result = await Parse.Cloud.run('deployApp', { files, placeholder });\n      setState((prev) => ({\n        ...prev,\n        snackbarMessage: 'App deployed successfully!',\n        snackbarSeverity: 'success',\n        snackbarOpen: true,\n        isAppDeployed: true,\n        deployStatusMessage: 'A link will appear beside the app name',\n      }));\n\n      setTimeout(() => {\n        setState((prev) => ({ ...prev, deployStatusMessage: '' }));\n      }, 3000);\n\n      console.log('Deployment result:', result);\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        snackbarMessage: 'Failed to deploy app. Please try again.',\n        snackbarSeverity: 'error',\n        snackbarOpen: true,\n      }));\n      console.error('Deployment error:', error);\n    }\n  };\n\n  const handleLoginSuccess = () => {\n    const currentUser = Parse.User.current();\n    setState((prev) => ({ ...prev, user: currentUser }));\n  };\n\n  const handleDeployClick = () => {\n    setState((prev) => ({ ...prev, deployModalOpen: true }));\n  };\n\n  const handleDeployConfirm = () => {\n    setState((prev) => ({ ...prev, deployModalOpen: false, isDeploying: true }));\n    handleDeploy();\n  };\n\n  const handleFilesChange = (filePath, newCode) => {\n    setState((prev) => ({\n      ...prev,\n      files: {\n        ...prev.files,\n        [filePath]: {\n          code: newCode,\n        },\n      },\n    }));\n  };\n\n  const handlePromoteClick = () => {\n    setState((prev) => ({ ...prev, promoteModalOpen: true }));\n  };\n\n  const handlePromoteConfirm = async () => {\n    setState((prev) => ({ ...prev, isPromoting: true }));\n\n    try {\n      const result = await Parse.Cloud.run('copyApp', { src, dest, token });\n      setState((prev) => ({\n        ...prev,\n        snackbarMessage: 'App promoted successfully!',\n        snackbarSeverity: 'success',\n        snackbarOpen: true,\n        isPromoting: false,\n        promoteModalOpen: false,\n      }));\n      console.log('Promotion result:', result);\n    } catch (error) {\n      setState((prev) => ({\n        ...prev,\n        snackbarMessage: 'Failed to promote app. Please try again.',\n        snackbarSeverity: 'error',\n        snackbarOpen: true,\n        isPromoting: false,\n      }));\n      console.error('Promotion error:', error);\n    }\n  };\n\n  const handlePromoteModalClose = () => {\n    setState((prev) => ({ ...prev, promoteModalOpen: false }));\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setState((prev) => ({ ...prev, [name]: value }));\n  };\n\n  return (\n    <Layout\n      deployButton={<Button variant=\"contained\" onClick={handleDeployClick}>Deploy</Button>}\n      promoteButton={\n        showPromoteButton && (\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={handlePromoteClick}\n            disabled={isPromoting}\n          >\n            Promote\n          </Button>\n        )\n      }\n    >\n      <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', minHeight: '80vh', textAlign: 'center' }}>\n        {/* Code Editor and App Preview */}\n        {showCodeEditor && (\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: { xs: 'column', md: 'row' },\n              width: '100%',\n              gap: 2,\n              mb: 4,\n            }}\n          >\n            {/* Render Editor */}\n            {renderEditor(files, handleFilesChange)}\n\n            {/* Render Preview */}\n            {renderPreview(files)}\n          </Box>\n        )}\n\n        {/* PromptSection and AI Box */}\n        <Box\n          sx={{\n            display: 'flex',\n            flexDirection: { xs: 'column', md: 'row' },\n            width: '100%',\n            gap: 2,\n            mt: 2,\n          }}\n        >\n          {/* PromptSection (Step 1 and Step 2) */}\n          <Box sx={{ flex: 2 }}>\n            <PromptSection\n              prompt={prompt}\n              setPrompt={(value) => setState((prev) => ({ ...prev, prompt: value }))}\n              enhancedPrompt={enhancedPrompt}\n              handleCopyPrompt={handleCopyPrompt}\n              systemPrompt={systemPrompt}\n              setSystemPrompt={(value) => setState((prev) => ({ ...prev, systemPrompt: value }))}\n            />\n          </Box>\n\n          {/* AI Box */}\n          {showAI && (\n            <Box sx={{ flex: 1 }}>\n              <Typography variant=\"h5\" component=\"h2\" gutterBottom>\n                Step 3: Paste to AI\n              </Typography>\n              <AIChat\n                showAI={showAI}\n                setShowAI={(value) => setState((prev) => ({ ...prev, showAI: value }))}\n              />\n            </Box>\n          )}\n        </Box>\n\n        {deployStatusMessage && <Typography variant=\"body1\" color=\"textSecondary\">{deployStatusMessage}</Typography>}\n\n        <Box sx={{ display: 'flex', gap: 2, mb: 2 }}>\n          {!showCodeEditor && <Button variant=\"outlined\" onClick={() => setState((prev) => ({ ...prev, showCodeEditor: true }))} startIcon={<VisibilityIcon />}>Show Code Editor</Button>}\n          {!showAppOutput && <Button variant=\"outlined\" onClick={() => setState((prev) => ({ ...prev, showAppOutput: true }))} startIcon={<VisibilityIcon />}>Show App Output</Button>}\n        </Box>\n      </Box>\n\n      <LoginModal open={loginModalOpen} onClose={() => setState((prev) => ({ ...prev, loginModalOpen: false }))} onLoginSuccess={handleLoginSuccess} />\n\n      <Dialog open={deployModalOpen} onClose={() => setState((prev) => ({ ...prev, deployModalOpen: false }))}>\n        <DialogTitle>Bookmark This App</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Before deploying, we recommend bookmarking this app to avoid losing it. Press <strong>Ctrl+D</strong> (Windows/Linux) or <strong>Cmd+D</strong> (Mac) to bookmark this page. Once Deployed, there will be a link beside the app name.\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setState((prev) => ({ ...prev, deployModalOpen: false }))}>Cancel</Button>\n          <Button onClick={handleDeployConfirm} color=\"primary\" variant=\"contained\">Deploy</Button>\n        </DialogActions>\n      </Dialog>\n\n      <Dialog open={promoteModalOpen} onClose={handlePromoteModalClose}>\n        <DialogTitle>Promote App</DialogTitle>\n        <DialogContent>\n          <TextField\n            fullWidth\n            label=\"Source App ID\"\n            name=\"src\"\n            value={`${src}/index.html`}\n            onChange={handleInputChange}\n            margin=\"normal\"\n            disabled\n          />\n          <TextField\n            fullWidth\n            label=\"Destination App ID\"\n            name=\"dest\"\n            value={`${dest}`}\n            onChange={handleInputChange}\n            margin=\"normal\"\n          />\n          <TextField\n            fullWidth\n            label=\"Token\"\n            name=\"token\"\n            value={token}\n            onChange={handleInputChange}\n            margin=\"normal\"\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handlePromoteModalClose}>Cancel</Button>\n          <Button onClick={handlePromoteConfirm} color=\"primary\" variant=\"contained\" disabled={isPromoting}>\n            {isPromoting ? 'Promoting...' : 'Promote'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <SnackbarAlert open={snackbarOpen} message={snackbarMessage} severity={snackbarSeverity} onClose={() => setState((prev) => ({ ...prev, snackbarOpen: false }))} />\n    </Layout>\n  );\n};\n\nexport default BaseAppPage;","import React, { useEffect, useRef, useState } from 'react';\nimport Editor from '@monaco-editor/react';\nimport Frame from 'react-frame-component';\nimport BaseAppPage from '../../components/Builder';\nimport { Box } from '@mui/material';\nimport { transform } from '@babel/standalone';\n\nconst ReactAppPage = ({ location, placeholder }) => {\n  // Use state to manage files dynamically\n  const [files, setFiles] = useState({\n    '/App.js': {\n      code: `import React from 'react';\n\nconst App = () => {\n  return (\n    <div>\n      <h1>Welcome to React App!</h1>\n      <p>Edit this code to build your React application.</p>\n    </div>\n  );\n};\n\nexport default App;`,\n    },\n    '/index.html': {\n      code: `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>React App</title>\n</head>\n<body>\n  <div id=\"root\"></div>\n</body>\n</html>`,\n    },\n  });\n\n  const renderEditor = (files, handleFilesChange) => (\n    <Box sx={{ flex: 1, height: { xs: '300px', md: '600px' }, border: '1px solid #ccc' }}>\n      <Editor\n        height=\"100%\"\n        width=\"100%\"\n        theme=\"vs-light\"\n        defaultLanguage=\"javascript\"\n        value={files['/App.js'].code}\n        onChange={(value) => handleFilesChange('/App.js', value)}\n        options={{\n          minimap: { enabled: false },\n          fontSize: 14,\n          scrollBeyondLastLine: false,\n        }}\n      />\n    </Box>\n  );\n\n  const iframeRef = useRef(null); // Reference to the iframe\n\n  // Effect to inject the React app code into the iframe\n  useEffect(() => {\n    if (iframeRef.current) {\n      const iframe = iframeRef.current;\n\n      // Wait for the iframe to load\n      iframe.addEventListener('load', () => {\n        const iframeDocument = iframe.contentDocument;\n\n        // Clear the existing content\n        iframeDocument.body.innerHTML = files['/index.html'].code;\n\n        console.log('Iframe content set:', iframeDocument.body.innerHTML); // Debugging\n\n        try {\n          // Compile the JSX code into JavaScript using Babel\n          const compiledCode = transform(files['/App.js'].code, {\n            presets: ['react'], // Use the React preset to handle JSX\n          }).code;\n\n          console.log('Compiled code:', compiledCode); // Debugging\n\n          // Create a script element for React and ReactDOM\n          const reactScript = iframeDocument.createElement('script');\n          reactScript.type = 'module';\n          reactScript.textContent = `\n            import React from 'https://unpkg.com/react@18/umd/react.production.min.js';\n            import ReactDOM from 'https://unpkg.com/react-dom@18/umd/react-dom.production.min.js';\n            const App = () => { return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \"Welcome to React App!\"), /*#__PURE__*/React.createElement(\"p\", null, \"Edit this code to build your React application.\")); };\n  \n            ReactDOM.render(<App />, document.getElementById('root'));\n          `;\n\n          reactScript.onerror = (error) => {\n            console.error('Error loading script:', error);\n          };\n\n          console.log('Script content:', reactScript.textContent); // Debugging\n\n          // Append the script to the iframe's body\n          iframeDocument.body.appendChild(reactScript);\n        } catch (error) {\n          console.error('Error compiling JSX:', error);\n        }\n      });\n    }\n  }, [files]); // Watch for changes in the `files` state\n\n  const handleFilesChange = (filePath, newCode) => {\n    setFiles((prevFiles) => ({\n      ...prevFiles,\n      [filePath]: {\n        code: newCode,\n      },\n    }));\n  };\n\n  const renderPreview = () => {\n    return (\n      <Box sx={{ flex: 1, height: { xs: '300px', md: '600px' }, border: '1px solid #ccc' }}>\n        <Frame\n          ref={iframeRef}\n          style={{ width: '100%', height: '100%', border: 'none' }}\n        >\n          {/* Initial content for the iframe */}\n          <div dangerouslySetInnerHTML={{ __html: files['/index.html'].code }} />\n        </Frame>\n      </Box>\n    );\n  };\n\n  return (\n    <>\n\n      <BaseAppPage\n      location={location}\n      placeholder={placeholder}\n      defaultFiles={files}\n      renderEditor={(files) => renderEditor(files, handleFilesChange)}\n      renderPreview={renderPreview}\n      inputSystemPrompt=\"create a react component with good design in one file\"\n    />\n\n{\n        transform(files['/App.js'].code, {\n          presets: ['react'], // Use the React preset to handle JSX\n        }).code\n      }\n\n    </>\n\n  );\n};\n\nexport default ReactAppPage;"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","id","module","exports","location","placeholder","defaultFiles","renderEditor","renderPreview","inputSystemPrompt","state","setState","useState","prompt","enhancedPrompt","files","snackbarOpen","snackbarMessage","snackbarSeverity","systemPrompt","showCodeEditor","showAppOutput","showAI","loginModalOpen","user","isAppDeployed","deployModalOpen","isDeploying","deployStatusMessage","isPromoting","promoteModalOpen","src","dest","token","queryParams","URLSearchParams","search","showPromoteButton","has","urlPrompt","get","useEffect","async","result","Parse","Cloud","run","Object","length","prev","error","console","fetchAppData","values","map","file","join","currentUser","User","current","handlePromoteModalClose","handleInputChange","name","value","target","Layout","deployButton","Button","variant","onClick","promoteButton","color","disabled","Box","sx","display","flexDirection","alignItems","justifyContent","minHeight","textAlign","xs","md","width","gap","mb","filePath","newCode","mt","flex","PromptSection","setPrompt","handleCopyPrompt","navigator","clipboard","writeText","then","setSystemPrompt","Typography","component","gutterBottom","AIChat","setShowAI","startIcon","Visibility","LoginModal","open","onClose","onLoginSuccess","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","setTimeout","log","handleDeploy","TextField","fullWidth","label","onChange","margin","SnackbarAlert","message","severity","setFiles","iframeRef","useRef","iframe","addEventListener","iframeDocument","contentDocument","body","innerHTML","compiledCode","transform","presets","reactScript","createElement","type","textContent","onerror","appendChild","handleFilesChange","prevFiles","height","border","theme","defaultLanguage","options","minimap","enabled","fontSize","scrollBeyondLastLine","ref","style","dangerouslySetInnerHTML","__html"],"sourceRoot":""}